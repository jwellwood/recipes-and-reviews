<div class="d-flex bd-highlight mb-2 justify-content-between">
  <div class="p-1 bd-highlight">
    <button type="button" class="btn btn-light btn-sm" routerLink="/reviews">
      Back
    </button>
  </div>
  <div class="p-1 btn-group btn-group-sm" *ngIf="review">
    <button
      type="button"
      routerLink="/reviews/edit/{{ id }}"
      class="btn btn-dark"
    >
      Edit
    </button>
    <button type="button" class="btn btn-danger" (click)="onDelete()">
      <fa-icon [icon]="trash" class="text-white"></fa-icon>
    </button>
  </div>
</div>

<div *ngIf="!review">
  <app-spinner></app-spinner>
</div>

<div class="card mb-3" *ngIf="review">
  <h3 class="card-header text-primary font-weight-bold">
    {{ review.name }}
  </h3>
  <!-- TODO Check spacing -->
  <div class="card-body mb-0">
    <div class="d-flex justify-content-between card-subtitle">
      <h6 class="text-muted mb-1">
        {{ review.city }},
        <small>{{ review.country }}</small>
      </h6>
      <h6 class="text-primary">
        {{ review.dateVisited.toDate() | date }}
      </h6>
    </div>
  </div>

  <blockquote *ngIf="review.tagLine" class="blockquote text-center">
    <p class="mb-0">
      <i>"{{ review.tagLine }}"</i>
    </p>
  </blockquote>

  <div class="card-body">
    <div class="row">
      <div class="col-md-4">
        <img
          style="width: 250px; height: 250px;"
          class="img-thumbnail rounded mx-auto d-block"
          src="https://picsum.photos/200/300"
          alt="Card image"
        />
      </div>
      <div class="col-md-8 px-2 my-2">
        <p class="card-text">
          {{ review.mainComment }}
        </p>
      </div>
    </div>
  </div>

  <!-- // TODO move images into a carousel component -->
  <div class="card-body">
    <h6 class="card-subtitle mb-2 text-muted">Gallery</h6>
    <app-carousel></app-carousel>
  </div>

  <div class="card-body">
    <ul class="list-group list-group-xl">
      <li class="list-group-item" *ngFor="let rating of ratings">
        <div class="d-flex w-100 justify-content-between align-items-center">
          <div class="mb-1">
            <div>{{ rating.type }}</div>
            <small class="text-primary">{{ rating.comment }}</small>
          </div>
          <span> {{ rating.value }}</span>
        </div>
      </li>
      <li
        class="list-group-item d-flex justify-content-between align-items-center list-group-item-success"
      >
        Overall<span class="font-weight-bold">{{
          overallRating | number: "1.0-1"
        }}</span>
      </li>
    </ul>
  </div>

  <div
    class="card-footer text-muted bg-primary text-right"
    *ngIf="review.website"
  >
    <div>
      <a class="font-weight-bold text-white card-link">{{ review.website }}</a>
    </div>
  </div>
</div>
